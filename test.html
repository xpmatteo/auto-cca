<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Runner</title>
  <link rel="icon" href="data:,">
</head>
<body>

  <p>Open the console to see test output</p>
  <p>Hit shift-command-R to ensure your changes are loaded</p>
  <p id="failures"></p>
  <div id="selector"></div>


<!--
  find src -type f -iname \*test.js -exec echo "<script src='{}' type="module"></script>" \; | sort
-->
  <script src='src/ai/ai_player_test.js' type=module></script>
  <script src='src/ai/monte_carlo_tree_search_node_test.js' type=module></script>
  <script src='src/interactive_game_test.js' type=module></script>
  <script src='src/lib/hexlib_test.js' type=module></script>
  <script src='src/model/board_test.js' type=module></script>
  <script src='src/model/commands/CloseCombatCommandTest.js' type=module></script>
  <script src='src/model/commands/EndPhaseCommandTest.js' type=module></script>
  <script src='src/model/commands/MoveCommandTest.js' type=module></script>
  <script src='src/model/dice_test.js' type=module></script>
  <script src='src/model/game_combat_test.js' type=module></script>
  <script src='src/model/game_phases_test.js' type=module></script>
  <script src='src/model/game_retreat_test.js' type=module></script>
  <script src='src/model/game_test.js' type=module></script>
  <script src='src/model/graveyard_test.js' type=module></script>
  <script src='src/model/phases/MovementPhaseTest.js' type=module></script>
  <script src='src/model/phases/RetreatPhaseTest.js' type=module></script>
  <script src='src/model/phases/battle_phase_test.js' type=module></script>
  <script src='src/model/scenarios_test.js' type=module></script>
  <script src='src/model/units_test.js' type=module></script>
  <script src='src/view/graphics_test.js' type=module></script>
  <script src='src/ai/playout_policies_test.js' type=module></script>
  <script src='src/model/commands/ranged_combat_command_test.js' type=module></script>
  <script src='src/model/phases/order_units_phase_test.js' type=module></script>

  <script type="module">
    // catch any exception thrown above
    window.onError = function(message, source, lineno, colno, error) {
      console.log("ERROR: " + message);
      failures++;
    }

    import { failures } from "./src/lib/test_lib.js";
    if (failures > 0) {
      document.body.style.backgroundColor = "pink";
      document.getElementById("failures").innerHTML = `${failures} failures`;
    } else {
      document.body.style.backgroundColor = "lightgreen";
    }
  </script>
</body>
</html>